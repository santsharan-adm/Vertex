<UserControl x:Class="IPCSoftware.App.Views.ReportViewerView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
 d:DesignHeight="1080" d:DesignWidth="1920"
             Background="#F3F3F3">

    <Viewbox Stretch="Uniform">
 <Grid Width="1920" Height="1080">
<Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
 <RowDefinition Height="Auto"/>
  <RowDefinition Height="*"/>
<RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
     <TextBlock Grid.Row="0" 
         Text="Report Viewer" 
         FontSize="48" 
 FontWeight="Bold"
         Foreground="#333333"
          Margin="40,30,0,20"/>

     <!-- Filter Panel -->
    <Border Grid.Row="1" Style="{StaticResource CardStyle}" Margin="40,0,40,20">
        <Grid>
     <Grid.ColumnDefinitions>
    <ColumnDefinition Width="Auto"/>
     <ColumnDefinition Width="Auto"/>
           <ColumnDefinition Width="Auto"/>
     <ColumnDefinition Width="*"/>
   <ColumnDefinition Width="Auto"/>
    </Grid.ColumnDefinitions>

   <!-- Report Format Selection -->
    <StackPanel Grid.Column="0" Orientation="Vertical" Margin="0,0,40,0">
  <TextBlock Text="Report Format" Style="{StaticResource HmiLabelStyle}"/>
<StackPanel Orientation="Horizontal">
       <ComboBox ItemsSource="{Binding ReportFormats}"
      SelectedItem="{Binding SelectedReportFormat}"
   DisplayMemberPath="Name"
  Style="{StaticResource HmiComboBoxStyle}"
   Width="280"/>
        <Button Content="Refresh" 
   Command="{Binding RefreshFormatsCommand}"
 ToolTip="Refresh Report Formats"
     Width="100" Height="50"
   FontSize="18" FontWeight="SemiBold"
   Background="#E0E0E0" Foreground="#333333"
    BorderThickness="0" Margin="10,0,0,0">
              <Button.Resources>
     <Style TargetType="Border">
         <Setter Property="CornerRadius" Value="6"/>
 </Style>
      </Button.Resources>
        </Button>
    </StackPanel>
    </StackPanel>

     <!-- Date From -->
<StackPanel Grid.Column="1" Orientation="Vertical" Margin="0,0,30,0">
        <TextBlock Text="From Date" Style="{StaticResource HmiLabelStyle}"/>
    <DatePicker SelectedDate="{Binding DateFrom}" 
      Width="180" Height="50" FontSize="20"/>
          </StackPanel>

      <!-- Date To -->
    <StackPanel Grid.Column="2" Orientation="Vertical" Margin="0,0,40,0">
 <TextBlock Text="To Date" Style="{StaticResource HmiLabelStyle}"/>
       <DatePicker SelectedDate="{Binding DateTo}" 
         Width="180" Height="50" FontSize="20"/>
   </StackPanel>

    <!-- Action Buttons -->
        <StackPanel Grid.Column="4" Orientation="Horizontal" VerticalAlignment="Bottom">
  <Button Content="Load Data" 
  Command="{Binding LoadDataCommand}"
         Width="180" Height="60"
FontSize="24" FontWeight="Bold"
      Background="#1976D2" Foreground="White"
       BorderThickness="0" Margin="0,0,15,0">
            <Button.Resources>
      <Style TargetType="Border">
 <Setter Property="CornerRadius" Value="8"/>
        </Style>
   </Button.Resources>
      </Button>
     <Button Content="Export CSV" 
      Command="{Binding ExportCsvCommand}"
    Width="180" Height="60"
  FontSize="24" FontWeight="Bold"
       Background="#388E3C" Foreground="White"
   BorderThickness="0">
    <Button.Resources>
<Style TargetType="Border">
          <Setter Property="CornerRadius" Value="8"/>
 </Style>
   </Button.Resources>
  </Button>
      </StackPanel>
   </Grid>
        </Border>

     <!-- Data Grid -->
     <Border Grid.Row="2" Background="White" CornerRadius="12" Margin="40,0,40,20"
         BorderBrush="#CCCCCC" BorderThickness="2">
       <DataGrid ItemsSource="{Binding ReportDataTable}"
    AutoGenerateColumns="True"
   CanUserAddRows="False"
 IsReadOnly="True"
        RowHeight="48"
      FontSize="20"
 HeadersVisibility="Column"
  Background="White"
    BorderThickness="0"
      GridLinesVisibility="All"
     HorizontalGridLinesBrush="#CCCCCC"
     VerticalGridLinesBrush="#CCCCCC"
    VerticalScrollBarVisibility="Auto"
         HorizontalScrollBarVisibility="Auto">

        <DataGrid.ColumnHeaderStyle>
         <Style TargetType="DataGridColumnHeader">
  <Setter Property="FontSize" Value="22"/>
         <Setter Property="FontWeight" Value="SemiBold"/>
    <Setter Property="Foreground" Value="#1A1A1A"/>
           <Setter Property="Padding" Value="15,12"/>
    <Setter Property="Background" Value="#F1F4F8"/>
        <Setter Property="BorderBrush" Value="#CCCCCC"/>
   <Setter Property="BorderThickness" Value="0,0,1,2"/>
<Setter Property="Height" Value="60"/>
    </Style>
          </DataGrid.ColumnHeaderStyle>

  <DataGrid.RowStyle>
   <Style TargetType="DataGridRow">
        <Setter Property="FontSize" Value="20"/>
      <Setter Property="Height" Value="48"/>
 <Setter Property="Background" Value="White"/>
    <Setter Property="BorderBrush" Value="#CCCCCC"/>
   <Setter Property="BorderThickness" Value="0,0,0,1"/>
       <Style.Triggers>
   <Trigger Property="IsMouseOver" Value="True">
   <Setter Property="Background" Value="#EAF3FF"/>
      </Trigger>
     <Trigger Property="IsSelected" Value="True">
 <Setter Property="Background" Value="#CCE4FF"/>
        <Setter Property="Foreground" Value="Black"/>
       </Trigger>
     </Style.Triggers>
 </Style>
    </DataGrid.RowStyle>

   <DataGrid.CellStyle>
 <Style TargetType="DataGridCell">
         <Setter Property="Padding" Value="15,8"/>
     <Setter Property="BorderBrush" Value="#CCCCCC"/>
         <Setter Property="BorderThickness" Value="0,0,1,0"/>
   <Setter Property="Template">
         <Setter.Value>
     <ControlTemplate TargetType="DataGridCell">
         <Border Background="{TemplateBinding Background}" 
        BorderBrush="{TemplateBinding BorderBrush}" 
    BorderThickness="{TemplateBinding BorderThickness}"
  Padding="{TemplateBinding Padding}">
      <ContentPresenter VerticalAlignment="Center"/>
  </Border>
       </ControlTemplate>
      </Setter.Value>
       </Setter>
     </Style>
     </DataGrid.CellStyle>
 </DataGrid>
  </Border>

    <!-- Footer Status Bar -->
 <Border Grid.Row="3" Background="White" BorderBrush="#E0E0E0" BorderThickness="0,1,0,0" Padding="40,15">
   <Grid>
       <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
   <ColumnDefinition Width="Auto"/>
     </Grid.ColumnDefinitions>

    <!-- Selected Format Info -->
    <StackPanel Grid.Column="0" Orientation="Horizontal">
   <TextBlock Text="Selected Format: " FontSize="22" Foreground="#666666" VerticalAlignment="Center"/>
        <TextBlock Text="{Binding SelectedReportFormat.Name, FallbackValue='None'}" 
    FontSize="22" FontWeight="SemiBold" Foreground="#333333" VerticalAlignment="Center"/>
     <TextBlock Text="  |  Columns: " FontSize="22" Foreground="#666666" VerticalAlignment="Center" Margin="20,0,0,0"/>
        <TextBlock Text="{Binding SelectedFormatColumns.Count, FallbackValue='0'}" 
   FontSize="22" FontWeight="SemiBold" Foreground="#333333" VerticalAlignment="Center"/>
     </StackPanel>

   <!-- Row Count -->
      <StackPanel Grid.Column="1" Orientation="Horizontal">
       <TextBlock Text="Total Rows: " FontSize="22" Foreground="#666666" VerticalAlignment="Center"/>
     <TextBlock Text="{Binding TotalRowsLoaded}" 
       FontSize="22" FontWeight="Bold" Foreground="#1976D2" VerticalAlignment="Center"/>
           </StackPanel>
           </Grid>
     </Border>
        </Grid>
    </Viewbox>
</UserControl>
