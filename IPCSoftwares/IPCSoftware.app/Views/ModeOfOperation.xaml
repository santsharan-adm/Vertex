<UserControl x:Class="IPCSoftware.App.Views.ModeOfOperation"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:IPCSoftware.App.ViewModels"
             xmlns:conv="clr-namespace:IPCSoftware.App.Converters"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
         
         xmlns:helpers="clr-namespace:IPCSoftware.App.Helpers"

        helpers:ViewModelLocator.AutoWireViewModel="{x:Type vm:ModeOfOperationViewModel}"
           >

    <!--<UserControl.DataContext>
        <vm:ModeOfOperationViewModel/>
    </UserControl.DataContext>-->

    <UserControl.Resources>

        <conv:SingleBtnEqualityConverter x:Key="SingleBtnEqualityConverter"/>
        <conv:EnumToSpacedStringConverter x:Key="EnumToSpacedStringConverter"/>

        <!-- Screen-specific overrides -->
        <sys:Double x:Key="ModeOpFontSize">30</sys:Double>
        <sys:Double x:Key="ModeOpWidth">200</sys:Double>
        <sys:Double x:Key="ModeOpHeight">120</sys:Double>
        <!--<sys:Thickness x:Key="ModeOpMargin">20</sys:Thickness>-->
        <!-- ADDED -->

        <Style x:Key="ModeOpButtonStyle"
               TargetType="Button"
               BasedOn="{StaticResource TouchButtonBaseStyle}">

            <Setter Property="FontSize" Value="{StaticResource ModeOpFontSize}"/>
            <Setter Property="Width" Value="{StaticResource ModeOpWidth}"/>
            <Setter Property="Height" Value="{StaticResource ModeOpHeight}"/>
            <!--<Setter Property="Margin" Value="{StaticResource ModeOpMargin}"/>-->

            <Style.Triggers>
                <DataTrigger Value="True">
                    <DataTrigger.Binding>
                        <MultiBinding Converter="{StaticResource SingleBtnEqualityConverter}">
                            <Binding Path="DataContext.SelectedButton"
                                     RelativeSource="{RelativeSource AncestorType=UserControl}"/>
                            <Binding />
                        </MultiBinding>
                    </DataTrigger.Binding>
                    <Setter Property="Background" Value="#0F9D58"/>
                </DataTrigger>
            </Style.Triggers>

        </Style>
    </UserControl.Resources>

    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="3*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- BUTTON PANEL -->
        <Viewbox Grid.Column="0" Stretch="Uniform" Margin="10">
            <ItemsControl ItemsSource="{Binding Modes}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <UniformGrid Columns="3"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Button Style="{StaticResource ModeOpButtonStyle}"
                            Content="{Binding Converter={StaticResource EnumToSpacedStringConverter}}"
                            Command="{Binding DataContext.ButtonClickCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                            CommandParameter="{Binding}"/>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Viewbox>


        <!-- RIGHT SIDE LOG PANEL (LIGHT MODE)-->
        <GroupBox Header="Operation Activity Log"
          Grid.Column="1"
          Margin="15"
          FontSize="26"
          Foreground="Black"
   
          BorderThickness="2"
          Background="White">

            <ListView ItemsSource="{Binding AuditLogs}"
              Width="420"
              Margin="10"
              Background="White"
              Foreground="Black"
              FontSize="20"
              BorderBrush="#D0D0D0"
              BorderThickness="1"
              ScrollViewer.VerticalScrollBarVisibility="Auto">

                <ListView.Resources>
                    <!-- Column header styling (white background, no dark theme) -->
                    <Style TargetType="GridViewColumnHeader">
                        <Setter Property="Background" Value="White"/>
                        <Setter Property="Foreground" Value="Black"/>
                        <Setter Property="FontSize" Value="22"/>
                        <Setter Property="FontWeight" Value="SemiBold"/>
                        <Setter Property="BorderBrush" Value="#D0D0D0"/>
                        <Setter Property="BorderThickness" Value="0,0,0,1"/>
                        <Setter Property="Padding" Value="8"/>
                        <Setter Property="HorizontalContentAlignment" Value="Left"/>
                    </Style>
                </ListView.Resources>

                <ListView.View>
                    <GridView>
                        <GridViewColumn 
                                Width="380"
                                DisplayMemberBinding="{Binding Message}"/>
                    </GridView>
                </ListView.View>

            </ListView>
        </GroupBox>


    </Grid>


</UserControl>


