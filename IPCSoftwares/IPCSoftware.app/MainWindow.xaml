<Window x:Class="IPCSoftware.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"

        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Ribbon -->
            <RowDefinition Height="*"/>
            <!-- Main body -->
        </Grid.RowDefinitions>

        <!-- RIBBON AREA -->
        <ContentControl x:Name="RibbonHost" Grid.Row="0"/>

        <!-- MAIN BODY -->
        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <!-- Main Content -->
                <RowDefinition Height="40"/>
                <!-- Footer -->
            </Grid.RowDefinitions>

            <!-- SIDE PANEL -->
            <Border x:Name="SideMenu"
                    Grid.RowSpan="2"
                    Width="250"
                    HorizontalAlignment="Left"
                    Background="#1E1E1E"
                    Panel.ZIndex="10">

                <Border.RenderTransform>
                    <TranslateTransform X="-250"/>
                </Border.RenderTransform>

                <Border.Style>
                    <Style TargetType="Border">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsSidebarOpen}" Value="True">
                                <DataTrigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation
                                                Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                                                To="0"
                                                Duration="0:0:0.25">
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.EnterActions>

                                <DataTrigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation
                                                Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                                                To="-250"
                                                Duration="0:0:0.25">
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseIn"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.ExitActions>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>

                <!-- SIDEBAR LIST -->
                <StackPanel Margin="12">
                    <ItemsControl ItemsSource="{Binding SidebarItems}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Button Width="220"
                                        Height="100"
                                        Margin="0 4"
                                        FontSize="24"
                                        Foreground="White"
                                        Background="#333"
                                        Style="{StaticResource TouchButtonBaseStyle}"
                                        Content="{Binding}"
                                        CommandParameter="{Binding}"
                                        Command="{Binding DataContext.SidebarItemClickCommand,
                                                         RelativeSource={RelativeSource AncestorType=Window}}"/>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Border>

            <!-- OVERLAY TO CLOSE SIDEBAR (MVVM CLOSE ON CLICK) -->
            <Border Background="#00000000"
                    Visibility="{Binding IsSidebarOpen, Converter={StaticResource BoolToVisibilityConverter}}"
                    Panel.ZIndex="5"
                    Grid.RowSpan="2">
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="MouseDown">
                        <i:InvokeCommandAction Command="{Binding CloseSidebarCommand}"/>
                    </i:EventTrigger>
                </i:Interaction.Triggers>
            </Border>

            <!-- MAIN CONTENT -->
            <ContentControl x:Name="MainContent"
                            Grid.Row="0"/>

            <!-- FOOTER -->
            <Border Grid.Row="1"
                    Background="#1E1E1E"
                    Padding="10"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Center">

                <TextBlock Text="{Binding AppVersion}"
                           Foreground="White"
                           FontSize="16"
                           HorizontalAlignment="Center"/>
            </Border>

        </Grid>
    </Grid>
</Window>
